# Snakefile for Jabba analysis workflow

import sys
sys.path.append("resources/samples")

from sample_pairs import sample_pairs

# load config
# -----------------------------------------------------
configfile: "config/config.yaml"

# load rules
# -----------------------------------------------------
include: "rules/Jabba.smk"
include: "rules/common.smk"


onstart:
    print("\n--- Analysis started ---\n")


onsuccess:
    print("\n--- Workflow finished! ---\n")


onerror:
    print("\n--- An error occurred! ---\n")

# define global variables
# -----------------------------------------------------

SAMPLES = [pair["sample_name"] for pair in sample_pairs]
BAM_DIR = config["BAM_DIR"]

rule all:
    input:
        expand("results/jabba/{sample}/cleanup.done", sample=SAMPLES),
        expand("results/jabba/{sample}/jabba.rds", sample=SAMPLES)
    default_target: True
